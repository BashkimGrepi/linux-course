# h3) tiivistys

## Name-based virtual host support

- IP-pohjainen virtuaalihostaus vaatii jokaiselle isännälle oman IP-osoiteen
- Nimiin perustuva virtuaalihostaus hyödyntää HTTP-otsikoissa olevaa isäntänimeä, mahdollistaen useiden isäntien jakavan saman IP-osoitteen.
- Se on yksinkertaisempi, koska riittää DNS-palvelimen ja Apachen-palvelimen asetusten määrittäminen.
- vähentää IP-osoitteiden tarvetta, ja sitä suositellaan ellei laitteisto vaadi IP-pohjaista hostausta
- Ensimmäinen vaihe nimiin perustuvassa virtuaalihostauksessa on IP-pohjaista hostausta
- Ensimmäinen vaihe nimiin perustuvassa virtuaalishostauksessa on IP-pohjainen resoluutio
- käyttämällä merkkiä (*) <VirtualHost> direktiiveissä IP-pohjainen kohdistus ei vaikuta
  ### Apache valitsee isännän seuraavasti
    - valitaan parhaitan sopiva IP-osoite ja portti
    - jos usieta virtuaali-isäntiä täsmää, vertaillaan ServerName- ja ServerAlias-direktiivejä
    - jos ServerName puuttuu, Apache käyttää järjestelmän oletusnimeä mikä voi jogtaa odottamattomiin tuloksiin
    - jos mikään ServerName tai ServerAlias ei täsmää, käytetään ensimmäistä listattua virtuaali-isäntää
  ### Virtuaali-isäntien määrittely:
    - jokaiselle isännälle luodaan <VirtualHost> lohko
    - vähintään ServerName ja DocumentRoot tulee määrittää
  ### Pääisännän muuttuminen
    - kun nimiin perustuva virtuaalihostaus lisätään, aiemnmat IP-porttiyhdistelmät siirtyvät erikseen määritellyille cirtuaali-isännille
    - suositeltavaa obn luoda oletusvirtuaali-isäntä, joka vastaa aiempaa pääisäntää
  ### ServerName periytyminen
  - jokaiselle virtuaali-isännälle tulisi määrittää ServerName
  - jos serverName puuttuu se periytyy pääpalvelimen asetuksista tai määrittyy automaattisesti, mikä coi caikuttaa isännän valintaan
 
  
